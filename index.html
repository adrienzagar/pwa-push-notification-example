<!DOCTYPE html>
<html lang="en">
<head>
  <title>PWA</title>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="manifest" href="./manifest.json" />
</head>
<body>
  <div id="content"></div>
  <button id="displayButton">Afficher le contenu</button>

  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', function() {
        navigator.serviceWorker.register('./sw.js').then(function(registration) {
          console.log('Service Worker enregistré avec succès:', registration);
        }).catch(function(error) {
          console.log("Erreur lors de l'enregistrement du Service Worker: ", error);
        });
      });
    }

    document.addEventListener('DOMContentLoaded', function() {
      const displayButton = document.getElementById('displayButton');
      const contentDiv = document.getElementById('content');

      displayButton.addEventListener('click', function() {
        if ('caches' in window) {
          caches.match('./data.json').then(function(response) {
            if (response) {
              response.json().then(function(data) {
                contentDiv.textContent = data.hello;
              });
            }
          });
        }
      });
    });
  </script>
</body>
</html>